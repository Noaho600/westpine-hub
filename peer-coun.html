<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üó£Ô∏è Peer Counseling Simulator</title>
<style>
  body { font-family: Arial, sans-serif; background: #f0f8ff; text-align: center; margin:0; }
  header { background:#6cc5d7; color:#222; padding:20px; }
  header h1 { margin:0; font-size:28px; }
  header p { margin:5px 0 0; font-size:14px; }
  #game { max-width:600px; margin:30px auto; padding:20px; background:#fff; border-radius:12px; border:2px solid #222; }
  .student-btn, .choice-btn { display:block; margin:10px auto; padding:10px 20px; font-size:16px; cursor:pointer; border-radius:8px; border:1px solid #222; background:#f2f2f2; }
  .student-btn:hover, .choice-btn:hover { background:#ddd; }
  #feedback { margin-top:20px; font-weight:bold; }
</style>
</head>
<body>

<header>
  <h1>üó£Ô∏è Peer Counseling Simulator</h1>
  <p>Help your classmates with their problems! Be careful with your choices.</p>
</header>

<div id="game">
  <div id="stage">
    <p>Choose a student to talk to:</p>
    <button class="student-btn" onclick="startConversation()">Random Student</button>
  </div>
  <div id="feedback"></div>
  <div id="score" style="margin-top:10px;">Score: 0</div>
</div>

<footer>
  <a href="index.html">‚¨Ö Back to Westpine.games</a>
</footer>

<script>
let score = 0;

const students = ["William", "Gerald", "Michael", "Adrianna", "Sophia", "Kairo", "Noah", "Shawn"];
const problems = [
  "I'm stressed about the math test tomorrow.",
  "I feel left out during recess.",
  "I don't understand the science homework.",
  "I lost my lunch money.",
  "I feel nervous about presenting in class.",
  "I accidentally broke a school item.",
  "I feel tired and can't focus in class."
];

// Responses include good or bad
const responses = [
  { text: "Give advice and encouragement.", outcome: "They feel supported and grateful!", good:true },
  { text: "Tell them not to worry too much.", outcome: "They feel calmer, but unsure.", good:true },
  { text: "Make a light joke about the situation.", outcome: "They laugh and feel a bit better!", good:true },
  { text: "Ignore their problem.", outcome: "They feel hurt and upset.", good:false },
  { text: "Tease them about their problem.", outcome: "They feel embarrassed and angry.", good:false },
  { text: "Give the wrong advice on purpose.", outcome: "The situation gets worse!", good:false },
  { text: "Listen quietly and nod.", outcome: "They feel heard and appreciated.", good:true },
  { text: "Offer to help them directly.", outcome: "They feel relieved and happy!", good:true }
];

function getRandomItem(array) {
  return array[Math.floor(Math.random() * array.length)];
}

function startConversation() {
  const student = getRandomItem(students);
  const problem = getRandomItem(problems);

  // Pick 3 random responses without duplicates
  let chosenResponses = [];
  while(chosenResponses.length < 3) {
    let r = getRandomItem(responses);
    if(!chosenResponses.includes(r)) chosenResponses.push(r);
  }

  let html = `<p><strong>${student}:</strong> ${problem}</p>`;
  chosenResponses.forEach((c, i) => {
    html += `<button class="choice-btn" onclick="choose('${c.outcome}', ${c.good})">${c.text}</button>`;
  });

  document.getElementById('stage').innerHTML = html;
  document.getElementById('feedback').innerHTML = '';
}

function choose(outcome, good) {
  document.getElementById('feedback').innerText = outcome;

  // Update score
  if(good) {
    score += 1;
  } else {
    score -= 1;
  }
  document.getElementById('score').innerText = "Score: " + score;

  // Return to random student selection after 3 seconds
  setTimeout(() => {
    document.getElementById('stage').innerHTML = `
      <p>Choose a student to talk to:</p>
      <button class="student-btn" onclick="startConversation()">Random Student</button>
    `;
    document.getElementById('feedback').innerText = '';
  }, 3000);
}
</script>

</body>
</html>
